<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>
	<body>
		<button>TEST</button>
		<a href="test.zip" download="test.zip">TEST4</a>
		<a id="test" class="ant-typography sc-kpDqfm gnAhio" href="" target="_blank" rel="noopener noreferrer">
			TEST8
		</a>
		<script>
			function isIOS() {
				var userAgent = navigator.userAgent || navigator.vendor || window.opera;
				// iOS detection from: http://stackoverflow.com/a/9039885/177710
				return (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream);
			}

			document.querySelector('#test').addEventListener('click', (e) => {
				e.preventDefault();
				(() => new Promise((resolve) => {
					setTimeout(() => {
						resolve(1);
					}, 2000);
				}))().then(() => {

						const a = document.createElement('a');
						a.href = 'test.zip';
						a.setAttribute('target', '_blank');
						if (isIOS()) {
							if (confirm('Скачать')) {
								a.click();
							}
						} else {
							a.click();
						}
				});
			})
		</script>
	</body>
</html>